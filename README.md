# Contract CLI

[![contract-cli CI](https://github.com/ibm-hyper-protect/contract-cli/actions/workflows/build.yaml/badge.svg)](https://github.com/ibm-hyper-protect/contract-cli/actions/workflows/build.yaml)
[![Go Report Card](https://goreportcard.com/badge/github.com/ibm-hyper-protect/contract-cli)](https://goreportcard.com/report/ibm-hyper-protect/contract-cli)

## Introduction

The CLI tool has been developed to automate the process of provisioning HPVS on both IBM Cloud and On Prem. This CLI tool leverages [contract-go](https://github.com/ibm-hyper-protect/contract-go) for all the features.

To download the CLI tool for respective OS, please refer the [release page](https://github.com/ibm-hyper-protect/contract-cli/releases). 

For more details on Hyper Protect Virtual Servers for VPC and Hyper Protect Container Runtime, refer [Confidential computing with LinuxONE](https://cloud.ibm.com/docs/vpc?topic=vpc-about-se) and [IBM Hyper Protect Virtual Servers](https://www.ibm.com/docs/en/hpvs/2.2.x).

## Usage

```bash
sashwatk@li-420cce4c-2770-11b2-a85c-81c35d559774 Sashwat-K/contract-cli (main) Â» ~/Downloads/contract-cli_v1.0.0_linux_amd64 --help           
This tool helps to provision HPVS/RHVS on IBM Cloud and On Prem 

Refer github.com/ibm-hyper-protect/contract-cli for details on features

Usage:
  contract-cli [command]

Available Commands:
  base64               Generate base64 of input
  base64-tgz           Generate base64 tar.tgz of docker-compose.yaml or pods.yaml
  decrypt-attestation  Decrypt encrypted attestation records
  download-certificate Download encryption certificate
  encrypt              Generate signed and encrypted contract
  encrypt-string       Encrypt string as per Hyper Protect format
  get-certificate      Get version specific encryption certificate from download-certificate JSON ouput
  help                 Help about any command
  image                Get latest HPCR Image ID from IBM Cloud Image list
  validate-contract    Validate unencrypted contract

Flags:
  -h, --help   help for contract-cli

Use "contract-cli [command] --help" for more information about a command.
```

## Features

1. Generate Base64 or plain text or JSON input.
2. Generate Base64 tar.tgz of `docker-compose.yaml` or `pods.yaml`.
3. Decrypt encrypted attestation records generated by HPVS instance.
4. Download encryption certificates from HPVS download portal.
5. Select encryption certificate from JSON of encryption certificates downloaded from HPVS download portal.
6. Encrypt plain text or JSON data as per Hyper Protect format.
7. Generate signed and encrypted contract for HPVS (with and without contract expiry).
8. Get the image details of any available (default to latest) HPVS image in IBM Cloud.
9. Validate unencrypted contracts for provisioning in HPVS. 

## Documentation

Refer [Docs](docs/README.md) for more details on how to leverage this CLI for your usecases.

## References

- [contract-go](https://github.com/ibm-hyper-protect/contract-go) - Go Library for generating Hyper Protect contracts
- [terraform-provider-hpcr](https://github.com/ibm-hyper-protect/terraform-provider-hpcr) - Terraform Provider for generating Hyper Protect contracts
- [k8s-operator-hpcr](https://github.com/ibm-hyper-protect/k8s-operator-hpcr) - Kubernetes operator for generating Hyper Protect contracts
